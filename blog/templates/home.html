{% load static %}
<!DOCTYPE html>
<html lang="en" class="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CyberSec Blog</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap"
        rel="stylesheet" />

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=block" rel="stylesheet" />

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#1876f2",
                        "background-light": "#f5f7f8",
                        "background-dark": "#101822",
                    },
                    fontFamily: { display: ["Plus Jakarta Sans"] },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        };
    </script>

    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
    </style>
</head>
<body class="bg-light">
    <a href="/home/profile/">My Profile</a>

<div class="container mt-4">
    <h2 class="mb-4">VulneraBlog â€” Write. React. Connect.</h2>

    <!-- NAVBAR -->
    <header
        class="sticky top-0 z-10 flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#e0e2e7] bg-white px-6 py-3">
        <div class="flex items-center gap-3 text-primary">
            <div class="size-8">
                <svg fill="currentColor" viewBox="0 0 48 48">
                    <circle cx="24" cy="24" r="20"></circle>
                </svg>
            </div>
            <h2 class="text-slate-900 text-xl font-bold leading-tight tracking-tight">
                CyberSec Blog
            </h2>
        </div>

        <div class="flex flex-1 justify-end gap-3 md:gap-4">

            <!-- Create Post Button -->
            <a href="{% url 'create_post' %}"
                class="flex items-center justify-center rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold hover:bg-primary/90 transition gap-2">
                <span class="material-symbols-outlined text-lg">add</span>
                <span class="truncate hidden sm:block">Create Post</span>
            </a>

            <!-- Right Side: Logout or Login -->
            {% if user.is_authenticated %}
            <a href="{% url 'logout' %}"
                class="flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-full size-10 cursor-pointer transition"
                title="Logout">
                <span class="material-symbols-outlined text-red-600 text-2xl">
                    logout
                </span>
            </a>
            {% else %}
            <a href="{% url 'login' %}"
                class="flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-full px-4 py-2 cursor-pointer transition text-sm font-semibold text-slate-800">
                Login
            </a>
            {% endif %}
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-1 w-full max-w-xl mx-auto py-8 px-4">
        <div class="flex flex-col gap-6">

            <!-- LOOP POSTS -->
            {% for post in posts %}
            <a href="{% url 'post_detail' post.id %}" class="block">
                <div class="flex flex-col bg-white rounded-xl shadow-sm hover:bg-slate-50 transition">
                    <div class="p-4">
                        <div class="flex items-center gap-3">
                            <div class="size-10 rounded-full bg-center bg-cover"
                                style="background-image: url('https://api.dicebear.com/9.x/identicon/svg?seed={{ post.author.username }}')">
                            </div>
                            <div>
                                <p class="text-slate-900 text-base font-bold">{{ post.author.username }}</p>
                                <p class="text-slate-500 text-sm">{{ post.created_at }}</p>
                            </div>
                        </div>

                        <h3 class="mt-3 text-lg font-semibold text-slate-900">{{ post.title }}</h3>

                        <p class="text-slate-700 text-sm mt-1">
                            {{ post.content|truncatechars:200 }}
                        </p>
                    </div>

                    <div class="flex justify-between items-center px-4 py-2 border-t border-slate-200">
                        <div class="flex items-center">
                            <span class="material-symbols-outlined text-primary text-lg"
                                style="font-variation-settings:'FILL'1">
                                thumb_up
                            </span>
                            <p class="text-slate-500 text-sm ml-1">{{ post.like_count }} likes</p>
                        </div>

                        <p class="text-slate-500 text-sm">
                            {{ post.comment_count }} comments
                        </p>
                    </div>
                </div>
            </a>
            {% empty %}
            <div class="bg-white rounded-xl shadow-sm p-6 text-center text-slate-600">
                No posts yet. Be the first to drop something ðŸ”¥
            </div>
            {% endfor %}

        </div>
    </main>

</body>

</html>
